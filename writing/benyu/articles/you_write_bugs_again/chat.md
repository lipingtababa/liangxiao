# 你又写Bug了！

> 来源：AI Coding 群聊 (Agent管理学：瀑布模型重生！)
> 日期：2026-01-28

---

## 核心故事：Marcus发现的"Bug"

**马工** (12:59) [原始消息未同步，仅存于引用]:
> 我说一下购物
>
> marcus找到的两个主要问题，一个是log了敏感信息，一个是db migration放在同一个文件而不是一系列文件。
>
> 这两个mistakes 都是claude code在我的明确请求下做的。原因都是尚未商业上线，数据不重要

**讽刺的是：** 这两个被视为"问题"的地方，都是 Claude Code 在马工的明确要求下做的。因为项目还没商业上线，数据不重要，所以当时就这样处理了。结果 Marcus 在代码审查时发现了这些"问题"。

> **注：** 12:59的原始消息和之前关于Marcus审查代码的讨论未被同步（当天12:00时段记录为空），只有16:26引用时保留了内容。

---

## 前序对话：银行集成自动化

**马工** (14:35) 回复 linhow 关于完全自动化不可能的观点:
> 你的结论我不一定认同。
>
> 我这个礼拜应该就能做到全自动化，针对一类tickets

**马工** (14:36):
> 我的目标就是集成银行。
>
> 工作其实很机械化，重要的foundation 已经打好了，接下来就是读api，配置新集成银行，然后run测试

**马工** (14:37):
> 这个事，人来做的话，非常无聊而且容易出错
>
> AI很合适

---

## 完整对话

### 讨论自定义 Orchestrator vs BMAD

**马工** (16:25) 回复之前关于银行集成工作的消息:
> @Nick@保利威直播
>
> 我又找到了一个不用bmad的理由了
>
> 我弄了个integrate slash command，这个command是一个orchestrator
>
> 它会调用planner subagent去阅读银行api，选择合适的auth flow，制定出详细的对接计划
>
> 然后orchestrator调用我的tester 和 coder subagent去写代码。这两个是项目无关的，只是语言specific

**马工** (16:26) 引用之前关于Marcus发现bug的消息:
> 这一套跑下来，质量就是这样的：
>
> [引用] 我说一下购物... marcus找到的两个主要问题...

**马工** (16:28):
> 我的意思不是说bmad不好，而且说每个人都可以定制一套流程+自己的subagent +orchestrator

**陈明** (16:31):
> bmad先用，用一段时间才有感觉知道怎么定制，我是这样

**陈明** (16:32):
> 高手当我没说

**马工** (16:33):
> 我知道bmad很好，我就是不喜欢它，所以我一直需要找理由不用它

**Player¹** (16:34):
> 我也是，我用bmad 优化我自己的角色

**马工** (16:34):
> 我直接问claude code，角色需要什么优化

---

### 讨论 Subagent 和 Slash Command 经验

**马工** (16:40):
> 我积累了不少攒subagent和slash command的经验

**Anointed** (16:41):
> [捂脸]很直白

**leo** (16:41):
> 分享分享

**马工** (16:41):
> 每次有进展，我都想给@鸭哥 脸上亲一个，是他的革命性文章开辟了新天地

**leo** (16:41):
> 你指定它看什么文档就好

**leo** (16:41):
> 哪个文章

**马工** (16:42):
> 把ai当人看那篇

**leo** (16:43):
> 那篇暴躁小哥那个

**马工** (16:48):
> 不是。鸭哥的那篇《管理ai，你职业生涯最大的晋升》

**鸭哥** (16:48):
> Mua

**leo** (16:49):
> 我因为一直管人，所以体感没那么大，我当时的感受就是，终于不用让别人拖后腿了

**马工** (16:54):
> 鸭哥像个仙人，很多领域开辟了新玩法，但是很快就转去新玩具了

---

### Claude Code 用 Python 调用 Subagent 的趣事

**马工** (16:56):
> claude code调用subagent，居然还去用python写脚本再使用claude -p

**Anointed** (16:59):
> 是说图中这个TASK是通过claude -p执行吗

**马工** (17:01):
> 对
>
> 这是/integrate的内容，这个skill应该调用ticket checker subagent
>
> 结果claude code告诉integrate用python 来调用

**Anointed** (17:03):
> 不知道task本身的subagent是如何实现，但我感觉和直接claude -p应该差别不大。而且claude -p至少能确实保证 它只会返回结果 不会污染上下文。

**Anointed** (17:04):
> 我每次开subagent都反复向cc确认是用了subagent。

**马工** (17:04):
> 大概ow就是
> 1.我出主意
> 2. vanilla claud code创造/ticket-checker subagent
> 3.vanilla claude code 修改 /integrate让它把checking工作委托给sub agent.
> 4.vanilla claude code选择了python作为delegation的手段

**马工** (17:05):
> 实现肯定是claude -p，不过subagent是一个很优雅的抽象了，不应该把具体的实现引入到skill里来

**Anointed** (17:09):
> 嗯 我觉得这就是llm忘记调用subagent这个抽象

---

### 经典回复

**陈明** (17:12) 回复马工关于鸭哥是仙人的评论:
> 这不是bug，这是feature

**马工** (17:15):
> 所以我果断的/reset了

---

### 瀑布模型重生！

**马工** (18:24):
> 群又改名了，我和@胥克谦 都在实践瀑布模型，而且效果出人意料的好！

**一百昏** (18:25):
> 什么是瀑布模型

**胥克谦** (18:25):
> 是恐怖的好

**王欢.ai** (18:33):
> 我怎么记得你之前坚定鄙视瀑布

**王欢.ai** (18:33):
> 还跟leo群里喷

**马工** (18:49):
> 他那是老瀑布，我这是AI加持的新瀑布

**马工** (18:49):
> Dario开光过的瀑布

**Player¹** (18:50):
> [NosePick]所以还是试试bmad 吧

**Player¹** (18:50):
> 还是有可取之处的

**马工** (18:50):
> Dario自己长得像个unemployed

**Player¹** (18:51):
> 可行性分析，需求分析，软件设计，概要设计，详细设计，开发，测试

**Player¹** (18:51):
> 这一套就是bmad 几个Agent的流转

**胥克谦** (18:53):
> 流程过长了，同时节点控制强度不够

**Player¹** (18:53):
> 按需求适当调整啊

---

## 总结

这段对话的亮点：

1. **Bug的来源：** Marcus审查代码发现的两个"问题"（log敏感信息、migration文件结构），实际上都是马工明确让Claude Code这样做的——因为项目还没上线，数据不重要。这是一个绝妙的讽刺。

2. **自定义工作流：** 马工分享了他的integrate slash command + orchestrator + subagent的工作流，强调每个人都可以定制自己的流程。

3. **Claude Code的选择：** Claude Code在实现subagent委托时选择了用Python写脚本调用claude -p，而不是直接使用抽象的subagent概念——体现了LLM有时会"忘记"使用已有的抽象。

4. **瀑布模型重生：** 从之前鄙视瀑布模型到现在实践"AI加持的新瀑布"，还戏称是"Dario开光过的瀑布"。
