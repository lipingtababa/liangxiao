# 测试：AI Coding的最后一个未解决问题

## 结构类型

提出问题（Raising Valuable Question）

## 核心论点

AI Coding的军备竞赛已经从"谁写代码更快"转向"谁的代码更可靠"。我们组织了两场研讨会，达成了一些共识，但更重要的是——发现了五个没人能回答的问题。

## 一、论坛简介

- 我们拉了一个AI Coding的社群，定期组织研讨会，探索AI时代的软件工程怎么做
- 两场研讨会（1/31端到端测试 + 2/7 agentic测试），二十多人，总计六个多小时
- 参会者背景跨度大：银行系统、脑刺激器医疗设备、阿里AI平台、顺丰、传统制造业MES系统、国企
- 这些问题不是中国特色问题，是全世界的无人区

## 二、我们的共识

### 共识一：测试在AI时代是第一公民

- AI让代码生产成本趋近于零，没有测试验收的代码就是泔水
- 连续用AI维护同一套生产代码几个月，没有测试是走不下去的
- 代码你甚至可以不怎么看，但测试一定要看

### 共识二：AI降低了测试成本，没有发明新方法

- 分层、mock、自动化、覆盖率——都不是新东西
- AI的贡献是让以前只有金融行业能落地的good practice全行业都能用了
- 端到端测试、GWT用户故事、自动化loop——方法论都是现成的，AI让执行成本暴跌

### 共识三：先写测试用例再写代码有价值，但红绿循环需要重估

- TDD的核心价值是逼你想清楚需求，不是红绿循环本身
- AI时代写代码太快了，红绿循环的价值需要重估
- 但"先定义预期行为，再让AI实现"——这个思路大家都认同


## 三、五个无人区问题

### 问题一：测试review的速度跟不上AI生成的速度

- 代码可以不怎么看，但测试一定要看——看AI有没有hack你的测试
- 但矛盾来了：AI一次产出三四十个测试用例，你真的能review完吗？
- 实际碰到的问题：写了二三十个GWT，AI生成测试漏了几个，人review也看漏了
- 有人的回答是"大力出奇迹"——跑十次总能覆盖。但这真的是答案吗？
- 核心张力：测试是AI时代的最后一道人工防线，但这道防线本身正在被AI的产出量冲垮

### 问题二：不可控的外部依赖怎么测试？

- 做脑刺激器的同事：蓝牙信号受植入位置、角度、电磁环境影响——物理世界不可模拟
- 做银行系统的同事：没有沙盒，沙盒的false positive太多——制度世界不可模拟
- mock的困境：有状态的跨请求依赖——"我一搞糊涂，AI也搞糊涂"
- 有人质疑：AI生成的mock可信吗？不确定性只是从代码转移到了mock
- 核心问题：测试的尽头在哪里？哪些东西是测试永远测不到的？

### 问题三：Agent流程的"好"怎么量化？

- 痛点：Agent的输出不是确定性的——不能assert字段X等于Y
- 一种实践：用人工标注reason + 打分，让AI学习人类的判断标准
- 但这引出了一个递归问题：谁来验证验证者？
  - 造一个verify agent去检验线上agent
  - 为了让verify agent靠谱，又要单独提升verify agent的能力
  - 这不就是"谁来监管监管者"？
- 核心问题：当评判标准本身无法精确定义时，自动化闭环从何谈起？

### 问题四：质量控制需要对抗性角色，还是统一框架？

- 一方立场：质量和速度天然冲突，需要独立的QC角色做对抗性开发
- 另一方立场：有了统一开发框架，质量是架构层面保证的——AI按规范写出来的代码不会比人差
- 两种路线的本质分歧：
  - 分权制衡（组织手段）
  - 框架约束（技术手段）
- 传统软件工程也有这个争论——但AI时代放大了它
- 核心问题：AI时代的质量保证，应该靠组织还是靠架构？还是两者都需要？

### 问题五：AI自动化测试的reward hacking

- 强化学习测试循环：AI自己做实验、自己评估、自己迭代
- 真实发生的问题：AI写200个if-else来过拟合benchmark样本集
- 对策（5-Why + SWOT反思、supervisor agent）缓解了但没解决
- 更深层：AI倾向于"达成目标"而不关心怎么达成——走捷径、短视、不考虑维护成本
- 本质上这就是强化学习的reward hacking——训练着就跑偏了
- 核心问题：当AI既是开发者又是测试者又是评审者，"作弊"的边界在哪里？

## 四、结尾——K个月后见

- 三个月后再看这些问题。被模型进步解决的，说明只是阶段性问题。仍然存在的，才是真正的工程问题
- 我们的判断：这些问题中至少有两三个不会被模型进步解决——因为它们是工程问题，不是模型能力问题
- 点题：AI Coding的军备竞赛从"写代码"进入了"保质量"的阶段。这不是一个技术问题，是一个软件工程问题
- 结尾号召：你在实践中碰到了哪些无人区问题？欢迎留言


## 写作注意事项

- 所有引用来自研讨会实际发言，不得编造
- 不逐一点名，用角色/背景描述（"做脑刺激器的同事"、"做银行系统的同事"）代替具体人名
- 只在背景对理解观点有帮助时才提及身份，否则直接呈现观点
- [需要真实数据] 标记的地方需要补充真实数字
- 研讨会中"我"说的话直接用第一人称
